<view class="container">
  <view class="tabs">
    <block wx:for="{{tabs}}" wx:key="*this">
      <view class="tab {{item===activeTab? 'active' : ''}}" data-tab="{{item}}" bindtap="switchTab">{{item}}</view>
    </block>
  </view>

  <view class="list">
  <block wx:if="{{events.length === 0}}">
    <view class="empty">No events yet. Tap Capture to start.</view>
  </block>
  <block wx:else>
    <block wx:for="{{events}}" wx:key="id">
      <view class="item" data-id="{{item.id}}" bindtap="openEvent">
        <view style="display:flex;align-items:center;gap:16rpx;margin-bottom:8rpx;">
          <image wx:if="{{item.user && item.user.avatar}}" src="{{item.user.avatar}}" style="width:64rpx;height:64rpx;border-radius:32rpx;"/>
          <view style="flex:1;">
            <view style="font-weight:600;">{{(item.user && item.user.name) || 'Angler'}}</view>
            <text class="time">{{item.timeText}}</text>
          </view>
        </view>
        <view class="row">
          <text class="status">{{item.status}}</text>
          <text class="duration">{{item.durationText}}</text>
        </view>
        <view class="row">
          <text wx:if="{{item.location}}" class="time">ğŸ“ {{item.location.latitude}}, {{item.location.longitude}}</text>
        </view>
        <view class="row">
          <text class="time">ğŸ‘ {{item.visibility || 'Public'}}</text>
          <text class="time">â¤ï¸ {{item.likeCount || 0}}</text>
        </view>
        <scroll-view scroll-x wx:if="{{item.media && item.media.length}}">
          <block wx:for="{{item.media}}" wx:key="path">
            <image wx:if="{{item.type==='image'}}" src="{{item.path}}" mode="aspectFill" style="width:200rpx;height:200rpx;margin-right:12rpx;border-radius:8rpx;"/>
            <view wx:elif="{{item.type==='video'}}" style="width:200rpx;height:200rpx;margin-right:12rpx;border-radius:8rpx;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;">â–¶ï¸ {{item.duration || 0}}s</view>
          </block>
        </scroll-view>
      </view>
    </block>
  </block>
  </view>
</view>
